<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trading Dashboard Pro - MEXC</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìà Trading Dashboard Pro MEXC</h1>
            <p>Ph√¢n t√≠ch chi ti·∫øt l·ªãch s·ª≠ giao d·ªãch v√† hi·ªáu su·∫•t trading</p>
            <div class="theme-toggle">
                <button id="themeToggle" onclick="toggleTheme()">üåô</button>
            </div>
        </div>
        
        <div class="import-section">
            <h3>üìÅ Import File Excel</h3>
            <p style="margin: 10px 0; color: #666;">Ch·ªçn file Excel ch·ª©a d·ªØ li·ªáu l·ªãch s·ª≠ giao d·ªãch ƒë·ªÉ b·∫Øt ƒë·∫ßu ph√¢n t√≠ch</p>
            <div class="file-input-wrapper">
                <input type="file" id="fileInput" accept=".xlsx,.xls,.csv" />
                üìÑ Ch·ªçn File Excel
            </div>
            <div id="fileStatus"></div>
        </div>
        
        <div id="dashboard" style="display: none;">
            <!-- Basic Stats -->
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>T·ªïng Giao D·ªãch</h3>
                    <div class="value" id="totalTrades">0</div>
                </div>
                <div class="stat-card">
                    <h3>T·ªïng PNL</h3>
                    <div class="value" id="totalPNL">0 USDT</div>
                </div>
                <div class="stat-card">
                    <h3>T·ª∑ L·ªá Th·∫Øng</h3>
                    <div class="value" id="winRate">0%</div>
                </div>
                <div class="stat-card">
                    <h3>L·ª£i Nhu·∫≠n Trung B√¨nh</h3>
                    <div class="value" id="avgProfit">0 USDT</div>
                </div>
                <div class="stat-card">
                    <h3>Gi·ªù Ho·∫°t ƒê·ªông Cao Nh·∫•t</h3>
                    <div class="value" id="peakHour">--:--</div>
                </div>
                <div class="stat-card">
                    <h3>Ng√†y Ho·∫°t ƒê·ªông Nhi·ªÅu Nh·∫•t</h3>
                    <div class="value" id="peakDay">---</div>
                </div>
            </div>
            
            <!-- Advanced Stats -->
            <div class="advanced-stats-grid">
                <div class="stat-card advanced">
                    <h3>Sharpe Ratio</h3>
                    <div class="value" id="sharpeRatio">--</div>
                    <div class="stat-description">Ch·ªâ s·ªë r·ªßi ro/l·ª£i nhu·∫≠n</div>
                </div>
                <div class="stat-card advanced">
                    <h3>Max Drawdown</h3>
                    <div class="value" id="maxDrawdown">--%</div>
                    <div class="stat-description">M·ª©c s·ª•t gi·∫£m t·ªëi ƒëa</div>
                </div>
                <div class="stat-card advanced">
                    <h3>Profit Factor</h3>
                    <div class="value" id="profitFactor">--</div>
                    <div class="stat-description">T·ª∑ l·ªá l√£i/l·ªó</div>
                </div>
                <div class="stat-card advanced">
                    <h3>Risk/Reward</h3>
                    <div class="value" id="riskReward">--</div>
                    <div class="stat-description">T·ª∑ l·ªá r·ªßi ro/ph·∫ßn th∆∞·ªüng</div>
                </div>
                <div class="stat-card advanced">
                    <h3>Chu·ªói Th·∫Øng T·ªëi ƒêa</h3>
                    <div class="value" id="maxWinStreak">--</div>
                    <div class="stat-description">S·ªë l·∫ßn th·∫Øng li√™n ti·∫øp</div>
                </div>
                <div class="stat-card advanced">
                    <h3>Chu·ªói Thua T·ªëi ƒêa</h3>
                    <div class="value" id="maxLossStreak">--</div>
                    <div class="stat-description">S·ªë l·∫ßn thua li√™n ti·∫øp</div>
                </div>
            </div>
            
            <!-- Filters -->
            <div class="filter-section">
                <label>L·ªçc theo c·∫∑p:</label>
                <select id="pairFilter">
                    <option value="">T·∫•t c·∫£</option>
                </select>
                <label>L·ªçc theo h∆∞·ªõng:</label>
                <select id="directionFilter">
                    <option value="">T·∫•t c·∫£</option>
                    <option value="Long">Long</option>
                    <option value="Short">Short</option>
                </select>
                <label>T·ª´ ng√†y:</label>
                <input type="date" id="dateFrom">
                <label>ƒê·∫øn ng√†y:</label>
                <input type="date" id="dateTo">
            </div>
            
            <!-- Export Buttons -->
            <div class="export-section">
                <button class="export-btn" onclick="exportToPDF()">
                    üìÑ Xu·∫•t PDF
                </button>
                <button class="export-btn" onclick="exportToExcel()">
                    üìä Xu·∫•t Excel
                </button>
                <button class="export-btn" onclick="shareReport()">
                    üîó Chia s·∫ª
                </button>
            </div>
            
            <!-- Charts -->
            <div class="charts-grid">
                <!-- PNL Chart -->
                <div class="chart-card">
                    <h3>üìà PNL T√≠ch L≈©y Theo Th·ªùi Gian</h3>
                    <div class="chart-container pnl-chart-container">
                        <canvas id="pnlChart"></canvas>
                    </div>
                </div>

                <!-- Pair Distribution -->
                <div class="chart-card">
                    <h3>üéØ Ph√¢n B·ªë C·∫∑p Giao D·ªãch</h3>
                    <div class="chart-container pair-chart-container">
                        <canvas id="pairChart"></canvas>
                    </div>
                </div>

                <!-- Direction Analysis -->
                <div class="chart-card">
                    <h3>üìä Ph√¢n T√≠ch Long/Short</h3>
                    <div class="chart-container direction-chart-container">
                        <canvas id="directionChart"></canvas>
                    </div>
                </div>

                <!-- PNL by Pair -->
                <div class="chart-card">
                    <h3>üí∞ PNL Theo C·∫∑p</h3>
                    <div class="chart-container">
                        <canvas id="pnlByPairChart"></canvas>
                    </div>
                </div>

                <!-- Hourly Activity -->
                <div class="chart-card">
                    <h3>‚è∞ Ho·∫°t ƒê·ªông Theo Gi·ªù</h3>
                    <div class="chart-container hourly-chart-container">
                        <canvas id="hourlyChart"></canvas>
                    </div>
                </div>

                <!-- Weekly Pattern -->
                <div class="chart-card">
                    <h3>üìÖ M·∫´u H√¨nh Theo Tu·∫ßn</h3>
                    <div class="chart-container weekly-chart-container">
                        <canvas id="weeklyChart"></canvas>
                    </div>
                </div>

                <!-- Monthly Performance -->
                <div class="chart-card">
                    <h3>üìÜ Hi·ªáu Su·∫•t Theo Th√°ng</h3>
                    <div class="chart-container monthly-chart-container">
                        <canvas id="monthlyChart"></canvas>
                    </div>
                </div>

                <!-- Calendar Heatmap -->
                <div class="chart-card">
                    <h3>üóìÔ∏è L·ªãch Nhi·ªát PNL</h3>
                    <div class="chart-container calendar-heatmap-container">
                        <canvas id="calendarHeatmap"></canvas>
                    </div>
                </div>

            </div>
            
            <!-- Recommendations -->
            <div class="recommendations-section" id="recommendations">
                <h3>üí° Ph√¢n T√≠ch & Khuy·∫øn Ngh·ªã</h3>
                <div id="recommendationsList"></div>
            </div>
            
            <!-- Trading Table Section -->
<div class="table-section">
    <div class="table-header">
        <h2 class="section-title">
            <span class="title-icon">üìã</span>
            L·ªãch S·ª≠ Giao D·ªãch
            <span class="title-decoration"></span>
        </h2>
        
        <div class="table-controls">
            <div class="search-box">
                <input type="text" id="tableSearch" placeholder="üîç T√¨m ki·∫øm..." />
            </div>
            <div class="table-actions">
                <select id="pageSize">
                    <option value="10">10 d√≤ng</option>
                    <option value="25" selected>25 d√≤ng</option>
                    <option value="50">50 d√≤ng</option>
                    <option value="100">100 d√≤ng</option>
                </select>
                <button class="btn-export" onclick="exportTableToExcel()">
                    üìä Export Excel
                </button>
                <button class="btn-export" onclick="exportTableToPDF()">
                    üìÑ Export PDF
                </button>
            </div>
        </div>
    </div>
    
                <div class="table-container">
                    <div class="table-wrapper">
                        <table id="tradingTable" class="trading-table">
                            <thead>
                                <tr>
                                    <th data-sort="pair" class="sortable">
                                        C·∫∑p <span class="sort-icon">‚ÜïÔ∏è</span>
                                    </th>
                                    <th data-sort="direction" class="sortable">
                                        H∆∞·ªõng <span class="sort-icon">‚ÜïÔ∏è</span>
                                    </th>
                                    <th data-sort="openTime" class="sortable">
                                        Th·ªùi Gian M·ªü <span class="sort-icon">‚ÜïÔ∏è</span>
                                    </th>
                                    <th data-sort="closeTime" class="sortable">
                                        Th·ªùi Gian ƒê√≥ng <span class="sort-icon">‚ÜïÔ∏è</span>
                                    </th>
                                    <th data-sort="quantity" class="sortable text-right">
                                        S·ªë L∆∞·ª£ng <span class="sort-icon">‚ÜïÔ∏è</span>
                                    </th>
                                    <th data-sort="entryPrice" class="sortable text-right">
                                        Gi√° V√†o <span class="sort-icon">‚ÜïÔ∏è</span>
                                    </th>
                                    <th data-sort="exitPrice" class="sortable text-right">
                                        Gi√° Ra <span class="sort-icon">‚ÜïÔ∏è</span>
                                    </th>
                                    <th data-sort="pnl" class="sortable text-right">
                                        PNL (USDT) <span class="sort-icon">‚ÜïÔ∏è</span>
                                    </th>
                                    <th data-sort="fee" class="sortable text-right">
                                        Ph√≠ <span class="sort-icon">‚ÜïÔ∏è</span>
                                    </th>
                                    <th>Tr·∫°ng Th√°i</th>
                                </tr>
                            </thead>
                            <tbody id="tableBody">
                                <!-- Data will be inserted here -->
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="table-pagination">
                        <div class="pagination-info">
                            <span id="paginationInfo">Hi·ªÉn th·ªã 0 - 0 c·ªßa 0 giao d·ªãch</span>
                        </div>
                        <div class="pagination-controls">
                            <button id="prevPage" class="btn-page" onclick="changePage(-1)">
                                ‚Üê Tr∆∞·ªõc
                            </button>
                            <div id="pageNumbers" class="page-numbers">
                                <!-- Page numbers will be inserted here -->
                            </div>
                            <button id="nextPage" class="btn-page" onclick="changePage(1)">
                                Sau ‚Üí
                            </button>
                        </div>
                    </div>
                </div>
            </div>

        </div>
        
        <div id="noData" class="no-data" style="display: none;">
            <p>Vui l√≤ng import file Excel ƒë·ªÉ b·∫Øt ƒë·∫ßu ph√¢n t√≠ch</p>
        </div>
    </div>
    
    <script src="script.js"></script>
</body>
</html>
